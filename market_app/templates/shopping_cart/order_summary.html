{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}


<html>
<body>
  {% if messages %}
  <ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }} p-3 mb-2 bg-success text-white" {% endif %}>{{ message }}</li>
      {% endfor %}
  </ul>
  {% endif %}
  <div class="container">
    <div class="row">
      <div class="col-md-1"></div>
      <div class="col-md-10">
        <section>
          <div class="table-responsive text-nowrap">
            <table class="table table-hover table-bordered text-center">
              <thead>
                <tr class="text-center">
                  <th>no.</th>
                  <th>Item title</th>
                  <th>Price</th>
                  <th>Quantity</th>
                  <th>Total price</th>
                </tr>
              </thead>
              <tbody>
                {% for item in order.get_cart_items %}
                <tr>
                  <th scope="row">{{ forloop.counter }}</th>
                  <td>{{ item.grocery.name }}</td>
                  <td id="price">{{ item.grocery.price }}</td>

                  <td class="quantity-box"><input type="number" id="qty" size="4" value="{{ item.quantity }}" min="0"
                      step="1" class="c-input-text text"></td>

                 
                    <td id="total"> </td>
           
                </tr>
                {% empty %}
                <tr>
                  <td colspan=5> You have not added any items yet.</td>
                </tr>
                {% endfor %}
                <tr>
                  {% if order.get_cart_total != None %}
                  <td colspan="5"><strong>Order Total: {{ order.get_cart_total }}rwf</strong></td>
                </tr>
                {% endif %}
                <tr>
                  <td colspan=1>
                    <a href="{% url 'grocery_list' %}" class="btn btn-warning pull-left">
                      {% if order %}Continue Shopping{% else %}Add Items to Cart {% endif %}
                    </a>
                  </td>
                  <td colspan=5>
                    {% if order.get_cart_items %}
                    <a href="{% url 'checkout' %}" class="pull-right btn btn-primary">Proceed To Checkout</a>
                    {% endif %}
                  </td>
                </tr>
            </table>
            </tbody>
            

  {% block scripts %}
  {{ block.super }}
 <!-- <script type='text/javascript'
  src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> -->
<script>
  $(document).ready(function () {
    $("input#qty").keypress(function () {
      total = 0
      var quantity = $("input#qty").val()
      var price = $("td#price").val()
      var total = price * quantity
      $("td#total").html(total)
    });
  });
</script>

  {% endblock scripts %}
</body>
</html>
{% endblock %}