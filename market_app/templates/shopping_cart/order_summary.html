{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}


<body>
  {% if messages %}
  <ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class="{{ message.tags }} p-3 mb-2 bg-success text-white" {% endif %}>{{ message }}</li>
      {% endfor %}
  </ul>
  {% endif %}
  <div class="container">
    <div class="row">
      <div class="col-md-1"></div>
      <div class="col-md-10">
        <section>
          <div class="table-responsive text-nowrap">
            <table class="table table-hover table-bordered text-center">
              <thead>
                <tr class="text-center">
                  <th>no.</th>
                  <th>Item title</th>
                  <th>Price</th>
                  <th>Quantity</th>
                  <th>Total price</th>
                </tr>
              </thead>
              <tbody>
                {% for item in order.get_cart_items %}
                <tr>
                  <th scope="row">{{ forloop.counter }}</th>
                  <td>{{ item.grocery.name }}</td>
                  <td>{{ item.grocery.price }}</td>


                  <td class="quantity-box"><input type="number" size="4" value="{{ item.quantity }}" min="0" step="1"
                      class="c-input-text qty text"></td>

                  <td>{{ item.get_total_grocery_price }}</td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan=5> You have not added any items yet.</td>
                </tr>
                {% endfor %}

                <tr>
                  {% if order.get_cart_total != None %}
                  <td colspan="5"><strong>Order Total: {{ order.get_cart_total }}rwf</strong></td>

                </tr>
                {% endif %}
                <tr>
                  <td colspan=1>
                    <a href="{% url 'grocery_list' %}" class="btn btn-warning pull-left">
                      {% if order %}Continue Shopping{% else %}Add Items to Cart {% endif %}
                    </a>
                  </td>
                  <td colspan=5>
                    {% if order.get_cart_items %}
                    <a href="{% url 'checkout' %}" class="pull-right btn btn-primary">Proceed To Checkout</a>
                    {% endif %}
                  </td>
                </tr>
            </table>
            </tbody>
            {% endblock %}
            <!-- {% for item in order.get_cart_items %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>
                  {{ item.grocery.name }}
                  <span class="pull-right">
                    <a href="{% url 'delete_item' item.id %}" data-balloon="remove this item from cart"
                      class="text-danger" onclick="return confirm_delete();">
                      <i class="fas fa-trash"></i>
                    </a>
                  </span>
                </td>
                <td>{{ item.grocery.price }}</td>

              </tr>
              {% empty %}
              <tr>
                <td colspan=3> You have not added any items yet.</td>
              </tr>
              {% endfor %}
              <tr>
                {% if order.get_cart_total != None %}
                <td colspan=2>
                  <strong class="pull-right">Order Total:</strong>
                </td>
                <td colspan=1>
                  $<strong>{{ order.get_cart_total }}</strong>
                </td>
                {% endif %}
              </tr>
              <tr>
                <td colspan=1>
                  <a href="{% url 'grocery_list' %}" class="btn btn-warning pull-left">
                    {% if order %}Continue Shopping{% else %}Add Items to Cart {% endif %}
                  </a>
                </td>
                <td colspan=2>
                  {% if order.get_cart_items %}
                  <a href="{% url 'checkout' %}" class="pull-right btn btn-primary">Proceed To Checkout</a>
                  {% endif %}
                </td>
              </tr>
            </table>
          </div>
        </section>
      </div>
      <div class="col-md-1"></div>
    </div>
  </div>
  {% block scripts %}
  {{ block.super }}
  <script>
    function confirm_delete() {
      return confirm("Do you want to remove this item from cart?");
    }
  </script>
  {% endblock scripts %}
</body>
 -->