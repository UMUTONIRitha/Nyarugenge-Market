{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}

<!-- <div class="col-lg-8">
    <div class="product-detail-top">
        <div class="row align-items-center">
            <div class="col-md-5">
                <div class="product-slider-single normal-slider">
                    <img src="img/vegetables.jpg" alt="Product Image">
                </div>
            </div>
            <div class="col-md-7">
                <div class="product-content">
                    <div class="title"><h2>Product Name</h2></div>
                    <div class="ratting">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                    </div>
                    <div class="price">
                        <h4>Price:</h4>
                        <p>$99</p>
                    </div>
                    <div class="quantity">
                        <h4>Quantity:</h4>
                        <div class="qty">
                            <button class="btn-minus"><i class="fa fa-minus"></i></button>
                            <input type="text" value="1">
                            <button class="btn-plus"><i class="fa fa-plus"></i></button>
                        </div>
                    </div>
                    <div class="action">
                       <button class="btn btn-outline-success"> <a class="btn" href="#"><i class="fa fa-shopping-cart"></i>Add to Cart</a></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row product-detail-bottom">
        <div class="col-lg-12">
            <ul class="nav nav-pills nav-justified">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="pill" href="#description">Description</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="pill" href="#specification">Comments</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="pill" href="#reviews">Rates</a>
                </li>
            </ul>

            <div class="tab-content">
                <div id="description" class="container tab-pane active">
                    <h4>Product description</h4>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In condimentum quam ac mi viverra dictum. In efficitur ipsum diam, at dignissim lorem tempor in. Vivamus tempor hendrerit finibus. Nulla tristique viverra nisl, sit amet bibendum ante suscipit non. Praesent in faucibus tellus, sed gravida lacus. Vivamus eu diam eros. Aliquam et sapien eget arcu rhoncus scelerisque. Suspendisse sit amet neque neque. Praesent suscipit et magna eu iaculis. Donec arcu libero, commodo ac est a, malesuada finibus dolor. Aenean in ex eu velit semper fermentum. In leo dui, aliquet sit amet eleifend sit amet, varius in turpis. Maecenas fermentum ut ligula at consectetur. Nullam et tortor leo. 
                    </p>
                </div>
                <div id="specification" class="container tab-pane fade">
                    <h4>Comments</h4>
                        <div>Lorem ipsum dolor sit amet - <span class="reviewer">By Nadine</span></div>
                    
                </div>
                <div id="reviews" class="container tab-pane fade">
                    <div class="reviews-submitted">
                        <div class="reviewer">Phasellus Gravida - <span>01 Jan 2020</span></div>
                        <div class="ratting">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                        </div>
                    </div>
                    <div class="reviews-submit">
                        <h4>Give your Review:</h4>
                        <div class="ratting">
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
</div>
</div>
</div>
</div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
<script src="lib/easing/easing.min.js"></script>
<script src="lib/slick/slick.min.js"></script> -->

<div class="p-3 mb-2 bg-light text-dark" style="font-family: Poppins;">
    <div class="container">
        <div class="card">
            <div class="row">
                <div class="col-md-7 ml-3">
                    <img src="{{ image.grocery_pic.url }}" width="300px"height="300px" alt=""> <br>
                    <!-- <hr style="width:96%"> -->
                     <div class="row product-detail-bottom">
                         
        <div class="col-lg-12">
            <ul class="nav nav-pills nav-justified">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="pill" href="#description"style="text-align: center;text-transform: uppercase;font-weight: 800;">Description</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="pill" href="#specification"style="text-align: center;text-transform: uppercase;font-weight: 800;">Comments</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="pill" href="#reviews"style="text-align: center;text-transform: uppercase;font-weight: 800;">Rates</a>
                </li>
            </ul>

            <div class="tab-content">
                <div id="description" class="container tab-pane active">
                    <!-- <h4 style="text-align: center;text-transform: uppercase;font-weight: 800;">Description</h4> -->
                    <!-- <h4 style="text-align:center;">Product description</h4> -->
                    <p class="card-text"><small class="text-muted">{{grocery.description}}</small></p>. 
                    
                </div>
                <div id="specification" class="container tab-pane fade">
                    <br>
                    <!-- <h4>Comments</h4> -->
                    {% for comment in image.comments.all %}
                    <div class="comment">
                        <div class="ml-2"><strong><img
                                    src="{{comment.user.profile_pic.url}}" class="rounded-circle border ml-3 mt-2  mr-3"
                                    alt="{{image.user.user.username}}" width="35" height="35">{{ comment.user.user.username }}</strong> 
                                    <span class="text-secondary">{{ comment.comment }}</span>
                        </div>
                    </div>
                    {% empty %}
                    <p class="ml-3">No comments here yet</p>
                    {% endfor %}
                    <br>
                    <form class="form" action="" method="post" novalidate>
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-10">
                                {{ form|crispy }}
                            </div>
                            {% if user.is_authenticated %}
                            <div class="col-md-2 mt-4">
                                <button type="submit" class="btn btn-sm btn-outline-primary"
                                    style="margin-top:14px; margin-left:-10px">post</button>
                            </div>
                            {% else %}
                            <a class="btn btn-outline-primary" href="/login">Login to comment</a>
                            {% endif %}
                        </div>
                    </form>
                    
                </div>
                <div id="reviews" class="container tab-pane fade">
                    <div class="reviews-submitted">
                        <br>
                        {% if rates %}
                    <p class="text-center" style="font-weight: bold;">Average ratings</p>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Prices</th>
                                <th scope="col">Fresh</th>
                                <th scope="col">Delivery</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><button class="btn p-2"
                                    style="background-color: #b0b435;border-radius: 50%;">{{grocery.avg_price |floatformat}}</button>
                                </td>
                                <td><button class="btn p-2" style="background-color: #b0b435;border-radius: 50%;">{{grocery.avg_freshness |floatformat}}</button>
                                </td>
                                <td><button class="btn p-2"
                                    style="background-color: #b0b435;border-radius: 50%;">{{grocery.avg_delivery |floatformat}}</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    {%else%}
                    
                    {%endif%}<br>
                    <p class="text-center" style="font-weight: bold;">Ratings with users</p>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Username</th>
                                <th scope="col">Price</th>
                                <th scope="col">Fresh</th>
                                <th scope="col">Delivery</th>
                            </tr>
                        </thead>
                        {% for rate in rates %}
                        {% if grocery.id == rate.grocery.id %}
                        <tbody>
                            <tr>
                                <th scope="row">{{rate.user.username}}</th>
                                <td>{{rate.prices}}</td>
                                <td>{{rate.fresh}}</td>
                                <td>{{rate.deliveries}}</td>
                            </tr>
                        </tbody>
                        {%endif%}
                        {% endfor  %}
                    </table>
                    <div class="row justify-content-center">
                        <a data-toggle="modal" data-target="#exampleModal2" class="btn btn-dark btn-sm col-md-4 p-2"
                            style="color: white;background-color: #b0b435;text-align: center;">Rate Service</a>
                    </div><br>
                    <div class="col-md-1"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Rate Service</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        {% if user.is_authenticated %}
                        <form class="form" action="" method="post" novalidate>
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-md-10">
                                    {{ form_rate|crispy }}
                                </div>
                                <div class="modal-footer">
                                <div class="col-md-2 mt-4">
                                    <button type="submit" class="btn btn-sm btn-outline-primary"
                                        style="margin-top:14px; margin-left:-10px">Rate</button>
                                </div>
                            </div>
                            </div>
                        </form>
                        {% else %}
                        <p>Login first to rate this service</p>
                        {% endif %}
                    </div>
                </div>
                <div class="modal-footer"></div>
                    </div>
                    <div class="reviews-submit">
                        <h4>Give your Review:</h4>
                        <div class="ratting">
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class ="col-md-3 mt-2" >
        <div style="margin-top:70px"></div>
        <h3 style="font-weight: bold;">Product Name:</h3>
        <h4>{{grocery.name}}</h4>
    </div>
</div>
</div>
        </div>
    </div>
</div>


<a href="#" id="back-to-top" title="Back to top" style="display: none;">&uarr;</a>

{% endblock %}